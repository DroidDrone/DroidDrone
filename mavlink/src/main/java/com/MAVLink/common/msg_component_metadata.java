/* AUTO-GENERATED FILE.  DO NOT MODIFY.
 *
 * This class was automatically generated by the
 * java mavlink generator tool. It should not be modified by hand.
 */

// MESSAGE COMPONENT_METADATA PACKING
package com.MAVLink.common;
import com.MAVLink.MAVLinkPacket;
import com.MAVLink.Messages.MAVLinkMessage;
import com.MAVLink.Messages.MAVLinkPayload;
import com.MAVLink.Messages.Units;
import com.MAVLink.Messages.Description;

/**
 * 
        Component metadata message, which may be requested using MAV_CMD_REQUEST_MESSAGE.

        This contains the MAVLink FTP URI and CRC for the component's general metadata file.
        The file must be hosted on the component, and may be xz compressed.
        The file CRC can be used for file caching.

        The general metadata file can be read to get the locations of other metadata files (COMP_METADATA_TYPE) and translations, which may be hosted either on the vehicle or the internet.
        For more information see: https://mavlink.io/en/services/component_information.html.

        Note: Camera components should use CAMERA_INFORMATION instead, and autopilots may use both this message and AUTOPILOT_VERSION.
      
 */
public class msg_component_metadata extends MAVLinkMessage {

    public static final int MAVLINK_MSG_ID_COMPONENT_METADATA = 397;
    public static final int MAVLINK_MSG_LENGTH = 108;
    private static final long serialVersionUID = MAVLINK_MSG_ID_COMPONENT_METADATA;

    
    /**
     * Timestamp (time since system boot).
     */
    @Description("Timestamp (time since system boot).")
    @Units("ms")
    public long time_boot_ms;
    
    /**
     * CRC32 of the general metadata file.
     */
    @Description("CRC32 of the general metadata file.")
    @Units("")
    public long file_crc;
    
    /**
     * MAVLink FTP URI for the general metadata file (COMP_METADATA_TYPE_GENERAL), which may be compressed with xz. The file contains general component metadata, and may contain URI links for additional metadata (see COMP_METADATA_TYPE). The information is static from boot, and may be generated at compile time. The string needs to be zero terminated.
     */
    @Description("MAVLink FTP URI for the general metadata file (COMP_METADATA_TYPE_GENERAL), which may be compressed with xz. The file contains general component metadata, and may contain URI links for additional metadata (see COMP_METADATA_TYPE). The information is static from boot, and may be generated at compile time. The string needs to be zero terminated.")
    @Units("")
    public byte uri[] = new byte[100];
    

    /**
     * Generates the payload for a mavlink message for a message of this type
     * @return
     */
    @Override
    public MAVLinkPacket pack() {
        MAVLinkPacket packet = new MAVLinkPacket(MAVLINK_MSG_LENGTH,isMavlink2);
        packet.sysid = sysid;
        packet.compid = compid;
        packet.msgid = MAVLINK_MSG_ID_COMPONENT_METADATA;

        packet.payload.putUnsignedInt(time_boot_ms);
        packet.payload.putUnsignedInt(file_crc);
        
        for (int i = 0; i < uri.length; i++) {
            packet.payload.putByte(uri[i]);
        }
                    
        
        if (isMavlink2) {
            
        }
        return packet;
    }

    /**
     * Decode a component_metadata message into this class fields
     *
     * @param payload The message to decode
     */
    @Override
    public void unpack(MAVLinkPayload payload) {
        payload.resetIndex();

        this.time_boot_ms = payload.getUnsignedInt();
        this.file_crc = payload.getUnsignedInt();
        
        for (int i = 0; i < this.uri.length; i++) {
            this.uri[i] = payload.getByte();
        }
                
        
        if (isMavlink2) {
            
        }
    }

    /**
     * Constructor for a new message, just initializes the msgid
     */
    public msg_component_metadata() {
        this.msgid = MAVLINK_MSG_ID_COMPONENT_METADATA;
    }

    /**
     * Constructor for a new message, initializes msgid and all payload variables
     */
    public msg_component_metadata( long time_boot_ms, long file_crc, byte[] uri) {
        this.msgid = MAVLINK_MSG_ID_COMPONENT_METADATA;

        this.time_boot_ms = time_boot_ms;
        this.file_crc = file_crc;
        this.uri = uri;
        
    }

    /**
     * Constructor for a new message, initializes everything
     */
    public msg_component_metadata( long time_boot_ms, long file_crc, byte[] uri, int sysid, int compid, boolean isMavlink2) {
        this.msgid = MAVLINK_MSG_ID_COMPONENT_METADATA;
        this.sysid = sysid;
        this.compid = compid;
        this.isMavlink2 = isMavlink2;

        this.time_boot_ms = time_boot_ms;
        this.file_crc = file_crc;
        this.uri = uri;
        
    }

    /**
     * Constructor for a new message, initializes the message with the payload
     * from a mavlink packet
     *
     */
    public msg_component_metadata(MAVLinkPacket mavLinkPacket) {
        this.msgid = MAVLINK_MSG_ID_COMPONENT_METADATA;

        this.sysid = mavLinkPacket.sysid;
        this.compid = mavLinkPacket.compid;
        this.isMavlink2 = mavLinkPacket.isMavlink2;
        unpack(mavLinkPacket.payload);
    }

         
    /**
    * Sets the buffer of this message with a string, adds the necessary padding
    */
    public void setUri(String str) {
        int len = Math.min(str.length(), 100);
        for (int i=0; i<len; i++) {
            uri[i] = (byte) str.charAt(i);
        }

        for (int i=len; i<100; i++) {            // padding for the rest of the buffer
            uri[i] = 0;
        }
    }

    /**
    * Gets the message, formatted as a string
    */
    public String getUri() {
        StringBuffer buf = new StringBuffer();
        for (int i = 0; i < 100; i++) {
            if (uri[i] != 0)
                buf.append((char) uri[i]);
            else
                break;
        }
        return buf.toString();

    }
                         
    /**
     * Returns a string with the MSG name and data
     */
    @Override
    public String toString() {
        return "MAVLINK_MSG_ID_COMPONENT_METADATA - sysid:"+sysid+" compid:"+compid+" time_boot_ms:"+time_boot_ms+" file_crc:"+file_crc+" uri:"+uri+"";
    }

    /**
     * Returns a human-readable string of the name of the message
     */
    @Override
    public String name() {
        return "MAVLINK_MSG_ID_COMPONENT_METADATA";
    }
}
        